<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mavericks Battleground - Premium Edition</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Teko:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Three.js for 3D model -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.134.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.134.0/examples/js/controls/OrbitControls.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Orbitron', sans-serif;
        }

        /* Dark blue low-poly geometric background */
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #001F4D 0%, #002D5C 50%, #003D82 100%);
            overflow: hidden;
        }

        #bg-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        #model-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Geometric pattern overlay */
        #canvas-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(30deg, #0066CC 12%, transparent 12.5%, transparent 87%, #0066CC 87.5%, #0066CC),
                linear-gradient(150deg, #0066CC 12%, transparent 12.5%, transparent 87%, #0066CC 87.5%, #0066CC),
                linear-gradient(30deg, #0066CC 12%, transparent 12.5%, transparent 87%, #0066CC 87.5%, #0066CC),
                linear-gradient(150deg, #0066CC 12%, transparent 12.5%, transparent 87%, #0066CC 87.5%, #0066CC);
            background-size: 100px 174px;
            background-position: 0 0, 0 0, 50px 87px, 50px 87px;
            opacity: 0.1;
            z-index: 1;
            pointer-events: none;
        }

        /* Content overlay */
        .content-overlay {
            position: relative;
            z-index: 10;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 40px 20px;
            pointer-events: none;
        }

        /* Top title */
        .game-title {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(2rem, 6vw, 4.5rem);
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 8px;
            text-align: center;
            background: linear-gradient(135deg, #FFFFFF 0%, #00FFFF 50%, #0066CC 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 40px rgba(0, 255, 255, 0.5);
            animation: titleGlow 2s ease-in-out infinite alternate;
            margin-top: 20px;
        }

        @keyframes titleGlow {
            from {
                filter: drop-shadow(0 0 20px rgba(0, 255, 255, 0.4));
            }
            to {
                filter: drop-shadow(0 0 40px rgba(0, 255, 255, 0.8));
            }
        }

        /* Bottom subtitle */
        .game-subtitle {
            font-family: 'Teko', sans-serif;
            font-size: clamp(1.2rem, 3vw, 2rem);
            font-weight: 500;
            letter-spacing: 6px;
            color: #00FFFF;
            text-transform: uppercase;
            text-align: center;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
            margin-bottom: 20px;
            font-style: italic;
        }

        /* Loading indicator */
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
            text-align: center;
        }

        .loading-text {
            font-size: 1.5rem;
            color: #00FFFF;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(0, 255, 255, 0.2);
            border-top-color: #00FFFF;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Instructions */
        .instructions {
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            text-align: center;
            letter-spacing: 2px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .game-title {
                letter-spacing: 4px;
            }
            
            .game-subtitle {
                letter-spacing: 3px;
            }
        }
    </style>
</head>
<body>
    <div id="canvas-container">
        <canvas id="bg-canvas"></canvas>
        <canvas id="model-canvas"></canvas>
    </div>

    <div class="loading" id="loading">
        <div class="spinner"></div>
        <div class="loading-text">LOADING VEHICLE...</div>
    </div>

    <div class="content-overlay">
        <h1 class="game-title">MAVERICKS BATTLEGROUND</h1>
        <h2 class="game-subtitle">The Pack Units - Premium Edition</h2>
    </div>

    <div class="instructions">
        Drag to rotate â€¢ Scroll to zoom
    </div>

    <script>
        // Background scene with low-poly mesh
        const bgCanvas = document.getElementById('bg-canvas');
        const bgRenderer = new THREE.WebGLRenderer({ 
            canvas: bgCanvas, 
            alpha: true,
            antialias: true 
        });
        bgRenderer.setSize(window.innerWidth, window.innerHeight);
        bgRenderer.setPixelRatio(window.devicePixelRatio);

        const bgScene = new THREE.Scene();
        const bgCamera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        bgCamera.position.z = 30;

        // Create low-poly animated mesh background
        const geometry = new THREE.IcosahedronGeometry(20, 1);
        const material = new THREE.MeshPhongMaterial({
            color: 0x0066CC,
            wireframe: true,
            transparent: true,
            opacity: 0.3
        });
        const mesh = new THREE.Mesh(geometry, material);
        bgScene.add(mesh);

        // Add lights to background
        const bgLight1 = new THREE.DirectionalLight(0x00FFFF, 0.5);
        bgLight1.position.set(1, 1, 1);
        bgScene.add(bgLight1);

        const bgLight2 = new THREE.DirectionalLight(0x0066CC, 0.5);
        bgLight2.position.set(-1, -1, -1);
        bgScene.add(bgLight2);

        // Animate background
        function animateBackground() {
            requestAnimationFrame(animateBackground);
            mesh.rotation.x += 0.001;
            mesh.rotation.y += 0.002;
            bgRenderer.render(bgScene, bgCamera);
        }
        animateBackground();

        // Main scene for 3D car model
        const modelCanvas = document.getElementById('model-canvas');
        const renderer = new THREE.WebGLRenderer({ 
            canvas: modelCanvas, 
            alpha: true,
            antialias: true 
        });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;

        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(5, 2, 8);

        // Lighting for the car
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
        scene.add(ambientLight);

        const mainLight = new THREE.DirectionalLight(0xffffff, 1.5);
        mainLight.position.set(5, 10, 5);
        mainLight.castShadow = true;
        mainLight.shadow.mapSize.width = 2048;
        mainLight.shadow.mapSize.height = 2048;
        scene.add(mainLight);

        const rimLight1 = new THREE.PointLight(0x00FFFF, 1, 50);
        rimLight1.position.set(-5, 2, -5);
        scene.add(rimLight1);

        const rimLight2 = new THREE.PointLight(0x0066CC, 1, 50);
        rimLight2.position.set(5, 2, -5);
        scene.add(rimLight2);

        // Add orbit controls
        const controls = new THREE.OrbitControls(camera, modelCanvas);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.minDistance = 3;
        controls.maxDistance = 15;
        controls.maxPolarAngle = Math.PI / 2;
        controls.target.set(0, 0.5, 0);

        // Load 3D car model
        const loader = new THREE.GLTFLoader();
        loader.load(
            'assets/source/2010 Porsche 911 GT3 RS.glb',
            function (gltf) {
                const car = gltf.scene;
                
                // Center and scale the model
                const box = new THREE.Box3().setFromObject(car);
                const center = box.getCenter(new THREE.Vector3());
                const size = box.getSize(new THREE.Vector3());
                
                const maxSize = Math.max(size.x, size.y, size.z);
                const scale = 2 / maxSize;
                car.scale.multiplyScalar(scale);
                
                car.position.sub(center.multiplyScalar(scale));
                car.position.y = 0;
                
                // Enable shadows
                car.traverse((node) => {
                    if (node.isMesh) {
                        node.castShadow = true;
                        node.receiveShadow = true;
                        
                        // Enhance materials
                        if (node.material) {
                            node.material.metalness = 0.8;
                            node.material.roughness = 0.3;
                        }
                    }
                });
                
                scene.add(car);
                
                // Hide loading indicator
                document.getElementById('loading').style.display = 'none';
                
                // Animate the car
                function animate() {
                    requestAnimationFrame(animate);
                    
                    // Subtle rotation
                    car.rotation.y += 0.002;
                    
                    controls.update();
                    renderer.render(scene, camera);
                }
                animate();
            },
            function (xhr) {
                const percent = (xhr.loaded / xhr.total) * 100;
                document.querySelector('.loading-text').textContent = 
                    `LOADING VEHICLE... ${Math.round(percent)}%`;
            },
            function (error) {
                console.error('Error loading model:', error);
                document.querySelector('.loading-text').textContent = 
                    'ERROR LOADING VEHICLE';
            }
        );

        // Add ground plane for shadow
        const groundGeometry = new THREE.PlaneGeometry(20, 20);
        const groundMaterial = new THREE.ShadowMaterial({ opacity: 0.3 });
        const ground = new THREE.Mesh(groundGeometry, groundMaterial);
        ground.rotation.x = -Math.PI / 2;
        ground.position.y = -0.5;
        ground.receiveShadow = true;
        scene.add(ground);

        // Handle window resize
        window.addEventListener('resize', () => {
            const width = window.innerWidth;
            const height = window.innerHeight;
            
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            renderer.setSize(width, height);
            
            bgCamera.aspect = width / height;
            bgCamera.updateProjectionMatrix();
            bgRenderer.setSize(width, height);
        });

        // Prevent context menu
        document.addEventListener('contextmenu', event => event.preventDefault());
    </script>
</body>
</html>
